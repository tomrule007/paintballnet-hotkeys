import { savedHotkeys } from './model';
function createHotkeyEditBox() {
  const editHotkeyTemplate = html`<div
    id="Component21421"
    class="TW3BlockBox"
    data-okey="OBJ21422"
    style="z-index: 16; visibility: visible; display: inline-block; overflow: hidden; left: 0px; top: 0px; position: absolute; width: 1920px; height: 950px;"
  >
    <div
      id="Component54"
      class="TW3Panel TW3ContainerBorder TW3ContainerBackground"
      data-okey="OBJ55"
      style="z-index: 17; visibility: visible; display: inline-block; overflow: initial; left: 691px; top: 364px; position: absolute; width: 541px; height: 226px;"
    >
      <div
        id="Component56"
        tabindex="0"
        class="TW3Label"
        data-okey="OBJ57"
        style="z-index: 1; visibility: visible; display: inline-block; overflow: hidden; left: 175px; top: 7px; position: absolute; width: 184px; height: 23px;"
      >
        <div
          class="lbxcontent lbxcontent_h_left lbxdisableBreak lbxcontent_v_top"
          style="font-size: 125%; font-weight: bold;"
        >
          Edit Command Button
        </div>
      </div>
      <div
        id="Component58"
        class="TGlyphComboBox TW3ButtonBackground TW3ButtonBorder"
        data-okey="OBJ73"
        style="visibility: visible; display: inline-block; overflow: initial; left: 7px; top: 39px; position: absolute; width: 52px; height: 28px;"
      >
        <img
          id="Component59"
          class="TW3Image"
          data-okey="OBJ60"
          style="z-index: 1; visibility: visible; display: inline-block; overflow: hidden; left: 8px; top: 5px; position: absolute; width: 16px; height: 16px;"
          src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAWklEQVQ4T+2RsQ3AIAwEz1uwAxNQMwprsQqs9hGKlCpGipySb+0/yWcjGAv2OQD2DoS0JBvmunIHna5GA8G0SaW+7m4BhfJ8OZO/AVZzMJRIeOX7vGAO4AeJFxNFDxH/2uzwAAAAAElFTkSuQmCC"
        />
        <div
          id="Component61"
          tabindex="0"
          class="TW3Label"
          data-okey="OBJ62"
          style="z-index: 2; visibility: visible; display: inline-block; overflow: hidden; left: 32px; top: 4px; position: absolute; width: 18px; height: 18px;"
        >
          <div
            class="lbxcontent lbxcontent_v_center lbxdisableBreak lbxcontent_h_center"
          >
            â–¼
          </div>
        </div>
        <div
          id="Component63"
          class="TGlyphListBox TW3ListBorder TW3ListBackground"
          data-okey="OBJ72"
          style="z-index: 3; visibility: hidden; display: none; overflow: hidden; left: 0px; top: 26px; position: absolute; width: 50px; height: 160px;"
        >
          <div
            id="Component64"
            class="TW3ScrollContainer"
            data-okey="OBJ65"
            style="z-index: 1; visibility: visible; display: inline-block; overflow: hidden; left: 0px; top: 0px; position: absolute; width: 48px; height: 158px;"
          >
            <div
              id="Component66"
              class="TW3ScrollContent"
              data-okey="OBJ67"
              style="z-index: 1; visibility: visible; display: inline-block; overflow: hidden; left: 0px; top: 0px; position: absolute; will-change: transform; height: 2160px; transform: translate(0px, 0px); width: 48px;"
            >
              <img
                id="Component3579"
                class="TGlyphListBoxItem"
                data-okey="OBJ3580"
                src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAH0lEQVQ4T2NkoBAwUqifYdQAhtEwYBgNA1A+Gvi8AAAmmAARf9qcXAAAAABJRU5ErkJggg=="
                style="z-index: 1; visibility: visible; display: inline-block; overflow: hidden; left: 0px; top: 0px; position: absolute; width: 0px; height: 16px; object-fit: contain;"
              /><img
                id="Component3583"
                class="TGlyphListBoxItem"
                data-okey="OBJ3584"
                src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABbElEQVQ4T4VTLUzDQBh9dZUDtbnZC6q4DUVwmytu8iS2QS5ZsqCWWmRlHZNzBNc5qkjl6loFlXVHvq+7W/8oZ7rv9t679/1ZaB7Viq1W3AnrALVwF3Cce8TxBz6jiMF5XtDnT6HGH1NHqDROmPi1neJunaIAmTKwjlD7Qn2/e8iiN9ys05rdKjPbtlCWTTd91s510OUgSOWCXJ2FO5ZM8UYjoCgUxraFvLzYJ/Jk/sjuli8p0rMTlt9sNsau/i3GNpK8hCuA7aoi07ld+oasq6sWq1mjPYfwaOzqlwlw/eB3OqJzafefBeXKRhCWLEannX9bTekiEVFMxgCumPjsxw3Bob6yk53nGKJ0gWMEzObcR74nV1qkt41EIrCYCP06F1vf10V6R9QVUCMBhHtASonXIDAFZxEARQLsk4EZpxefpGRwTYBCRYlo4aFtU1NHoMwyWijTrd3Ww+n0g0N8BO3Nv+vaGJAqqM84fgEtcJAOB7cAfAAAAABJRU5ErkJggg=="
                style="z-index: 2; visibility: visible; display: inline-block; overflow: hidden; left: 0px; top: 16px; position: absolute; width: 0px; height: 16px; object-fit: contain;"
              /><img
                id="Component3587"
                class="TGlyphListBoxItem"
                data-okey="OBJ3588"
                src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABbUlEQVQ4T4VTLXDCMBT+cJ1jU9Rhc1Odg6ndHLjOISNne5Pccdeb4monK+uGxO3milvVrpK6ogayLrv3IKFpOxaTvOR9X77314O9VMPuNeyWWXdQE38Cz3tAln3iK03Zebc70PYnkfUw9IQqspyB3+EQ9/MCexvdImpeqJ+PAGX6jtt5YeTquK4coKpsNV3S2F+DyIHOtJOqE7HB6YNJXr8P7A+A6wBldQ6ewO74idVNXwsUJyX8wWKxMHL1WQwc5LsKvgDC2RFM624aGbDOrprMRlZ51snGyNU/k8PNY9SqSCuEOpOcOYiTisloNeNvsimdJAIKdwDgmoEvUca7JqxXtlVGclwGngFKH9ikwGgMwHH4nlRpks4yEoichSv075xsfV8n6WxRX0D1BZCsACkl3uLYJJxJABxyYJVf6HH68VlKdq4RcI9RIJr40rSpoSdQlSUNlKnWMgyw3e6xzjagufl3XK0GORr1LscvZ+mNDtM5u8YAAAAASUVORK5CYII="
                style="z-index: 3; visibility: visible; display: inline-block; overflow: hidden; left: 0px; top: 32px; position: absolute; width: 0px; height: 16px; object-fit: contain;"
              /><img
                id="Component3591"
                class="TGlyphListBoxItem"
                data-okey="OBJ3592"
                src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABxElEQVQ4T5WTLXDbQBCFPzGl6BwkFUVQZnKRwzplFrNZzRRm6hEqNuoY1iyGhWISS4Nao9rMggqqhJpDqdh17qT4p7ZBF2hu9va9fbtPZ3E51Jkr69/cSaItUJPJhHA8Iv2xJpnPuN9Kwmtze4S5SPA7/cR1ODOIX+mU3t29OVeVPCK5SKCrNImO7t0XqvJ5r94ysP3nYC6FDdSAUmBZCMD0VAphWcg232IaKhuUxqQPDwY9/jBCUiOEQD43nR3X1fqpWmXFds67uDYyVAOEdL1mEcf8/Gzjdaf0RjOe/jRmOG6H244kyTH3bjfibbhoCAYf+9wEQ5ZxzPcWHI5nSBtEB8oCXB98V7DMzEC8pFPehPOdJSro+2xWuVmcBuNB4Nlkmc2VkLzvOdRCsvyqh20an3j6+g8EjkPQM4W78H3PnIuiYJHsrTxrY9+3le/ZFFvJ41PDMRkKPK8hieebizYaw6KBoChtHjd65yaMZE1S11CVksxwaKNPQ/X9JrnKd2BziAZi9z7aZf4fweviNJkjbCpZHxP4N47ye7ckSXIo/VCjeWSyyqnrK5IsO35ZZs4oYpV/Y7My2zs74mA4oCy3puYvBvC1C9wC5zgAAAAASUVORK5CYII="
                style="z-index: 4; visibility: visible; display: inline-block; overflow: hidden; left: 0px; top: 48px; position: absolute; width: 0px; height: 16px; object-fit: contain;"
              /><img
                id="Component21443"
                class="TGlyphListBoxItem"
                data-okey="OBJ21444"
                src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAVElEQVQ4T7WSSQ4AIAgD6f8fjfFAQiLgUvE+Q5FCyAeSl36BqiiQDyoTTNhWzCSpwMOVJBREcCZZBBUcSf4nsCnUH0SS6yt4yXMPTmreX+VdCjrBAPwSGxH3P8AgAAAAAElFTkSuQmCC"
                style="z-index: 5; visibility: hidden; display: none; overflow: hidden; left: 0px; top: 64px; position: absolute; width: 48px; height: 16px; object-fit: contain;"
              /><img
                id="Component21447"
                class="TGlyphListBoxItem"
                data-okey="OBJ21448"
                src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAWklEQVQ4T+2RsQ3AIAwEz1uwAxNQMwprsQqs9hGKlCpGipySb+0/yWcjGAv2OQD2DoS0JBvmunIHna5GA8G0SaW+7m4BhfJ8OZO/AVZzMJRIeOX7vGAO4AeJFxNFDxH/2uzwAAAAAElFTkSuQmCC"
                style="z-index: 6; visibility: hidden; display: none; overflow: hidden; left: 0px; top: 80px; position: absolute; width: 48px; height: 16px; object-fit: contain;"
              /><img
                id="Component21451"
                class="TGlyphListBoxItem"
                data-okey="OBJ21452"
                src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAq0lEQVQ4T2NkoBAwUqifYWgZ8J+BAdPFhLwA0gQCIHXIbHjQ4TIArDgpiIHBSNGQIaf3PHJYo+jBaQBI89y1/xkYGBkZphYbMmzbd55h23nivPA/KYqDYe7S72DNILCPgYHhejHcJQRd8D9Ik4Fh7XWEq0EGTNVkYFgHESPOAAFDDoboZT/AOnBpxjANKaTAgTil2JBh37bzMJuxqscXjbBow2fREEvKWDMuAJDKKxEuznE0AAAAAElFTkSuQmCC"
                style="z-index: 7; visibility: hidden; display: none; overflow: hidden; left: 0px; top: 96px; position: absolute; width: 48px; height: 16px; object-fit: contain;"
              /><img
                id="Component21455"
                class="TGlyphListBoxItem"
                data-okey="OBJ21456"
                src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABmElEQVQ4T6WTL0/DUBTFf3MPV8zSGULlDEkFJBMVbK5zk8xN8imW8BmYY3LJDI4mCGZItgREE8wSzMjMGlTlcyX3di0tf9Ru0qTv3XvOO/fc9xocGI0D8fxHkOXEBrDVM37V/9xQ4Hg81k8WUjAIQ84uLnRvHyWuSpBJocR9FPEEdCvVBUkQBPR6PckotiDIqmLlH2Ow9lt+kXfbwA6SVNkbJYHI7fvgthzNTKN034LBbVtCz8FzPW5nMTtbnlwSyJHZExYVB79auBn53M1i7iwM25Cs6y0U5qiJoQ+LGB5ACUV2soZT6cM1fHzYv00Ul99eXlhEkTqft5mbKmvXdZhMZ7VJlB74nVM67S6t1jFxvNaxnQcBr8/PfG7fFVhMqSCtmXg9GtE8OVH2x/mclucpiSgqAFLTHw71cvV7/foUCgWyG69W+J2OjrLZbPK53TKZTvdtuCRJom1VFWCMycJufnUkeTW4xHE80mSD5YjdZqOqJJbLBUmaG1m7ysaQGQyptQ3HmCzF4hiHNFU7pXb/Rr5xB7/GL1zdkxHkZSrDAAAAAElFTkSuQmCC"
                style="z-index: 8; visibility: hidden; display: none; overflow: hidden; left: 0px; top: 112px; position: absolute; width: 48px; height: 16px; object-fit: contain;"
              /><img
                id="Component21459"
                class="TGlyphListBoxItem"
                data-okey="OBJ21460"
                src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABuElEQVQ4T3WTIXPbQBBGn9mGnYskJkGJyaxlddmVdfoLDFMaWpQJyhSadQyLOmUVTFnKLGZDm1ksYl3mzt5ZsuOxF/nWu0/ffns34nLsr+RH5/nzxF6A2SchdcVZrfKwWKMxO/SdAvYz74YmA6VJflHI10UzQHrA3lfH2iSNoPwKwP7rIRcBWZqgB7HXIA+LxipGBtgnZ+NOTD/QKzmdw4CbdkO766ibaEaQb4dz0GljhDqW2tGuoe8JgFufsN21AXIMQYZBYlZEUFWSxOEnsKi7owIreFtV/G0anhqYVvHsJxV38x/8WSuPP6GcwvwDGP5Xo4zEPMiEcqx8eSmYj9csFXzueFp1TEtHvYmy72dxVfaRfyoBGkbIMijH0TQzpzewflb8OxkAdk/MRFvhKw/ssHoBvTk6kCMUuQSgKTIFt96F5drsvnLUzcGDJANp4e67UH9TVi9xpOXOMUmPgPvfULwXPr8xI6HdymEEAU3Al69HyLMCXxZ8nC+G1ZnGuhGSTGm3h0dhRpq0/jqv1nDjhDyNT+d54+g6DU0W1mh7AA03sY/hCYuAKKj9OJR2as2hqa8Pvf8BKri6EL5s6E8AAAAASUVORK5CYII="
                style="z-index: 9; visibility: hidden; display: none; overflow: hidden; left: 0px; top: 128px; position: absolute; width: 48px; height: 16px; object-fit: contain;"
              /><img
                id="Component21463"
                class="TGlyphListBoxItem"
                data-okey="OBJ21464"
                src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAYklEQVQ4T7WSSxLAIAhDk7N57p4tHRc4lqEO/lwqvkAIsXm4+R9DwAOoChT8130AkkSy3UUAX3NnBFPpO/DK5t05D3o1P/voLTRsCRDlYXqNBjlmYiald4O07EGm9VSQMqAXS7ZAEQ73SAIAAAAASUVORK5CYII="
                style="z-index: 10; visibility: hidden; display: none; overflow: hidden; left: 0px; top: 144px; position: absolute; width: 48px; height: 16px; object-fit: contain;"
              /><img
                id="Component21467"
                class="TGlyphListBoxItem"
                data-okey="OBJ21468"
                src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABdUlEQVQ4T42TLXSDQBCEJ4661CUuyJNXR10iiWsdkrpWR7VVfVXVsZFIXHB9uCBPriSOuOCCo+8W7kpI0mYVPzff7g7DANdXDWDQP37y4BxvIkU9li5KynGogK0iq7sGUHuhj9ktsB9NoShlEGUN5E+A6TxzJYoih0ICikuMxoIH1ZNcAuh9ucLnAO5TgWR5AxVv4IoxSBFQ8etTgOl6fz/F8m2BateSHGAiBLbUiEN/iFVSnqxQT6TA40sIh1IUhyGoKiGcIVariIX6/VbRWUD9+vGFz/fF0dioDsjilMVeMEUWpc1qvQl45/X3GvP5HGEYcGcj9h5+ha3xdRfAYkt39LVvxVIKqIyMp9p0KzYmWsc1pMp3cNwRj206m27d0U0EmKiD0obDBlF6AlJKRHGE4K5xvAM6SiI7r8vElTLilQraseO6fAkkqvn23bjbCSrKsW/CYasV85n24cWfiQ8EYYCNatp0xMfU3l2faA397z8xnB/c68INzmodXgAAAABJRU5ErkJggg=="
                style="z-index: 11; visibility: hidden; display: none; overflow: hidden; left: 0px; top: 160px; position: absolute; width: 48px; height: 16px; object-fit: contain;"
              /><img
                id="Component21471"
                class="TGlyphListBoxItem"
                data-okey="OBJ21472"
                src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABPklEQVQ4T7WTIVTDMBRFX93sUJ0rMriA6uRwkZ2rLKjUroqDG6oHubhVViKxyDlwxE7OMVkXzk9JaEeH2VlV/kney/2vPwFO/IIT9TibgSGyiDMLuP3QDvTPhUMERpZlK9Aa20Yjz5cQ0xmCwB7vaXpFxJkRPAYYw7gBdF3gfcQg0sz6rfI7zG8u8KJ/TbxBwmDCuD1IBk1dYMdiW4Z6g0lSYjq7tiTzq8CbdAmMSFvBa70BrTlL8DUCVouFFbG0tLUqCt/KYQaGgqPQyCDiiW2Fbl7f37bt8BiqqryuR+BSd8k7ok+9t8LxJTtOQBnQDe6XORIyk1kGta5sezKX2L2pwQxo37dABj+4kFKintTI8YDnxyc02A+24IbFmnQHSCQCURhBKaJojs9B513YSewMzWHtj57tLXRg/l9+A0YObxE/uqsdAAAAAElFTkSuQmCC"
                style="z-index: 12; visibility: hidden; display: none; overflow: hidden; left: 0px; top: 176px; position: absolute; width: 48px; height: 16px; object-fit: contain;"
              /><img
                id="Component21475"
                class="TGlyphListBoxItem"
                data-okey="OBJ21476"
                src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAyElEQVQ4T2NkoBAwUqifYZgb8B8aPni9iUvyf1Z3N8O00lKQGSQb8D8rKYlh2rx5+DSDXAc2GN10ZJthMYysBuwtZNdhNWCZZCvDh5gfDFndzTBvgA0DaRT8wcDQWovwGqYBSUkMyxTXMXyo+cBw9txZBiNNRYZt588zbD12joHh+nUMr2ELoP8CSwQYNPdZMRhyKDAwKCoyMNy/z/Dgw3mGbcuOY3gbRwhz/Gfg+MHgFWTJoCBgiFMzwShiYGCApQWcagc+LwAAmuJDEVe8HugAAAAASUVORK5CYII="
                style="z-index: 13; visibility: hidden; display: none; overflow: hidden; left: 0px; top: 192px; position: absolute; width: 48px; height: 16px; object-fit: contain;"
              />
            </div>
          </div>
          <div
            id="Component68"
            class="TW3ScrollContentIndicator TW3DecorativeBackground"
            data-okey="OBJ69"
            style="z-index: 2; visibility: visible; display: inline-block; overflow: hidden; left: 40px; top: 0px; position: absolute; opacity: 0; will-change: left, top; width: 4px; height: 11px;"
          ></div>
          <div
            id="Component70"
            class="TW3ScrollContentIndicator TW3DecorativeBackground"
            data-okey="OBJ71"
            style="z-index: 3; visibility: visible; display: inline-block; overflow: hidden; left: 0px; top: 150px; position: absolute; opacity: 0; will-change: left, top; width: 48px; height: 4px;"
          ></div>
        </div>
      </div>
      <input
        type="text"
        id="Component74"
        tabindex="0"
        class="TW3EditBox TW3EditBorder TW3EditBackground"
        autocorrect="off"
        autocapitalize="off"
        placeholder="...caption"
        data-okey="OBJ75"
        autocomplete="off"
        style="z-index: 3; visibility: visible; display: inline-block; overflow: hidden; left: 64px; top: 39px; position: absolute; width: 112px; height: 27px;"
      /><input
        type="text"
        id="Component76"
        tabindex="0"
        class="TW3EditBox TW3EditBorder TW3EditBackground"
        autocorrect="off"
        autocapitalize="off"
        placeholder="...command(s)"
        data-okey="OBJ77"
        autocomplete="off"
        style="z-index: 4; visibility: visible; display: inline-block; overflow: hidden; left: 181px; top: 39px; position: absolute; width: 347px; height: 27px;"
      />
      <div
        id="Component78"
        tabindex="0"
        class="TW3Label"
        data-okey="OBJ79"
        style="z-index: 5; visibility: visible; display: inline-block; overflow: hidden; left: 181px; top: 72px; position: absolute; width: 258px; height: 20px;"
      >
        <div
          class="lbxcontent lbxcontent_h_left lbxdisableBreak lbxcontent_v_top"
        >
          Separate commands with &amp; (ampersand).
        </div>
      </div>
      <div
        id="Component80"
        tabindex="0"
        class="TW3Label"
        data-okey="OBJ81"
        style="z-index: 6; visibility: visible; display: inline-block; overflow: hidden; left: 181px; top: 95px; position: absolute; width: 211px; height: 20px;"
      >
        <div
          class="lbxcontent lbxcontent_h_left lbxdisableBreak lbxcontent_v_top"
        >
          %rhand = item in your right hand.
        </div>
      </div>
      <div
        id="Component82"
        tabindex="0"
        class="TW3Label"
        data-okey="OBJ83"
        style="z-index: 7; visibility: visible; display: inline-block; overflow: hidden; left: 181px; top: 118px; position: absolute; width: 202px; height: 20px;"
      >
        <div
          class="lbxcontent lbxcontent_h_left lbxdisableBreak lbxcontent_v_top"
        >
          %lhand = item in your left hand.
        </div>
      </div>
      <div
        id="Component84"
        tabindex="0"
        class="TW3Label"
        data-okey="OBJ85"
        style="z-index: 8; visibility: visible; display: inline-block; overflow: hidden; left: 181px; top: 141px; position: absolute; width: 245px; height: 20px;"
      >
        <div
          class="lbxcontent lbxcontent_h_left lbxdisableBreak lbxcontent_v_top"
        >
          %who = player selected in the who list
        </div>
      </div>
      <div
        id="Component86"
        tabindex="0"
        class="TW3Label"
        data-okey="OBJ87"
        style="z-index: 9; visibility: hidden; display: none; overflow: hidden; left: 0px; top: 0px; position: absolute; width: 0px; height: 0px;"
      >
        <div
          class="lbxcontent lbxcontent_h_left lbxdisableBreak lbxcontent_v_top"
        >
          ...
        </div>
      </div>
      <div
        id="Component88"
        tabindex="0"
        class="TW3Label"
        data-okey="OBJ89"
        style="z-index: 10; visibility: hidden; display: none; overflow: hidden; left: 0px; top: 0px; position: absolute; width: 0px; height: 0px;"
      >
        <div
          class="lbxcontent lbxcontent_h_left lbxdisableBreak lbxcontent_v_top"
        >
          ...
        </div>
      </div>
      <button
        id="Component90"
        class="TW3Button TW3ButtonBackground TW3ButtonBorder"
        data-okey="OBJ91"
        style="z-index: 11; visibility: visible; display: inline-block; overflow: hidden; left: 185px; top: 187px; position: absolute; width: 80px; height: 26px;"
      >
        OK</button
      ><button
        id="Component92"
        class="TW3Button TW3ButtonBackground TW3ButtonBorder"
        data-okey="OBJ93"
        style="z-index: 12; visibility: visible; display: inline-block; overflow: hidden; left: 269px; top: 187px; position: absolute; width: 80px; height: 26px;"
      >
        Cancel
      </button>
    </div>
  </div>`;
}
function createUI() {
  console.log('CALLLEED CREATEUI');
  //Menu link
  const menuLinkDiv = document.createElement('div');
  menuLinkDiv.classList.add(
    'TPBTOverlayScrollItem',
    'TPBTOverlayScrollInfoItem'
  );
  menuLinkDiv.style.cssText = `position: fixed; 
                     z-index: 1000;
                     top: 2px;
                     right: 2px;
                     color: red;
                     text-decoration: underline;
                     cursor: pointer;
                     `;
  const a = document.createElement('a');
  a.appendChild(document.createTextNode('PBN-Hotkeys'));
  a.title = `red = not connected
black = connected
hotkeys by tomrule007`;
  a.id = 'pbnHotkeysLink';
  a.onclick = () => showMenu(true);
  menuLinkDiv.append(a);
  document.body.appendChild(menuLinkDiv);
  console.log(menuLinkDiv);
  //Hotkey Setup Menu
  const menuDiv = document.createElement('div');
  menuDiv.id = 'pbnHotkeysMenu';
  menuDiv.classList.add(
    'TW3Panel',
    'TW3ContainerBorder',
    'TW3ContainerBackground'
  );
  menuDiv.style.cssText =
    'z-index: 8; right: 2px; top: 40px; position: fixed; display: none;';

  // menu label
  const menuBarDiv = document.createElement('div');
  menuBarDiv.style.cssText = 'display: flex; justify-content:	space-between;';
  const menuLabelEl = document.createElement('span');
  menuLabelEl.append(
    document.createTextNode('Paintballnet-Hotkeys by tomrule007')
  );
  menuLabelEl.classList.add('tw3label');

  // menu content container
  const menuContentEl = document.createElement('div');
  menuContentEl.id = 'pbnHotkeyMenuDisplay';
  menuContentEl.classList.add('TPBTListBox');
  menuContentEl.style.cssText =
    'margin: 5px 2px; font-family: Lucida Console; font-size: 10pt; padding: 2px;';
  console.log(window.pbnHotkeyMenuDisplay);
  // menu close button
  const closeButtonEl = document.createElement('button');
  closeButtonEl.append(document.createTextNode('X'));
  closeButtonEl.classList.add(
    'TW3Button',
    'TW3ButtonBackground',
    'TW3ButtonBorder'
  );
  closeButtonEl.style.cssText = 'margin: 2px; font-size: 8pt;';
  closeButtonEl.onclick = () => showMenu(false);

  //save changes button
  const saveButton = document.createElement('button');
  saveButton.append(document.createTextNode('Save Changes'));
  saveButton.classList.add(
    'TW3Button',
    'TW3ButtonBackground',
    'TW3ButtonBorder'
  );
  saveButton.style.cssText = 'margin: 2px; font-size: 8pt;';
  saveButton.onclick = saveChanges;

  const saveButtonContainerEl = document.createElement('div');
  saveButtonContainerEl.style.display = 'flex';
  saveButtonContainerEl.style.justifyContent = 'center';

  menuBarDiv.append(menuLabelEl, closeButtonEl);
  saveButtonContainerEl.append(saveButton);
  menuDiv.append(menuBarDiv, menuContentEl, saveButtonContainerEl);

  document.body.appendChild(menuDiv);

  Object.entries(savedHotkeys).forEach(([hotkey, command]) => {
    createHotkeyCard(hotkey, command);
  });
  createHotkeyCard('Click to set', '');

  return {
    setLinkEnabled,
  };
}

function getHotkeysFromMenu() {
  const menuContentDiv = document.getElementById('pbnHotkeysMenu')
    .childNodes[1];
  const newHotkeysAndCommands = Object.fromEntries(
    Array.from(menuContentDiv.childNodes).map((hotkeyCardContainer) => {
      const hotkeyCard = hotkeyCardContainer.childNodes[0];
      const hotkey = hotkeyCard.childNodes[0].childNodes[0].dataset.hotkeyCode;
      const command = hotkeyCard.childNodes[1].innerText;
      console.log({ hotkey, command });
      return [hotkey, command];
    })
  );
  return newHotkeysAndCommands;
}
function saveChanges() {
  const newHotkeys = getHotkeysFromMenu();
  window.localStorage.setItem('pbn-hotkeys', JSON.stringify(newHotkeys));
  pbnHotkeys.hotkeys = newHotkeys;
}

const DEFAULT_COMMAND_TEXT = 'Click to enter command';
function commandSpanOnFocus() {
  // Clear default text on focus
  if (this.innerText === DEFAULT_COMMAND_TEXT) {
    this.innerText = '';
  }
}
function commandSpanOnBlur() {
  // Remove all line breaks.
  this.childNodes.forEach((child) => {
    if (child.tagName === 'BR') {
      this.removeChild(child);
    }
  }, this);

  // Reset default text if blank
  if (this.innerText === '') {
    this.innerText = DEFAULT_COMMAND_TEXT;
  }
}
function createHotkeyCard(hotkey, command) {
  const hotkeyCardContainer = document.createElement('div');
  hotkeyCardContainer.style.cssText =
    'margin: 2px; border-bottom: 1px solid grey;';
  const hotkeyCard = document.createElement('div');
  hotkeyCard.style.position = 'relative';
  const hotkeyDivEl = document.createElement('div');
  hotkeyDivEl.style.cssText =
    'display: inline-block; min-width: 60px; textAlign: right; margin: 0px 2px';

  const hotkeyEl = document.createElement('a');
  hotkeyEl.dataset.hotkeyCode = hotkey;
  hotkeyEl.append(document.createTextNode(hotkeyCodeToText(hotkey)));
  hotkeyEl.onclick = setHotkeyClickHandler;
  hotkeyDivEl.append(hotkeyEl);
  const hotkeyCommandEl = document.createElement('span');
  hotkeyCommandEl.append(document.createTextNode(command));
  hotkeyCommandEl.style.outline = 'none';
  hotkeyCommandEl.style.display = 'inline-block';

  hotkeyCommandEl.contentEditable = true;
  hotkeyCommandEl.onfocus = commandSpanOnFocus;
  hotkeyCommandEl.onblur = commandSpanOnBlur;

  hotkeyCardContainer.append(hotkeyCard);
  hotkeyCard.append(hotkeyDivEl, hotkeyCommandEl);
  console.log(window.pbnHotkeyMenuDisplay);
  window.pbnHotkeyMenuDisplay.appendChild(hotkeyCardContainer);
}

function showMenu(setVisible) {
  pbnHotkeysMenu.style.display = setVisible ? 'block' : 'none';
}
function setLinkEnabled() {
  pbnHotkeysLink.style.color = 'black';
}

function saveUpdatedHotkey(e) {
  const newHotkey = window.hotkeySetContainer.childNodes[1].innerText;
  const newHotkeyCode =
    window.hotkeySetContainer.childNodes[1].dataset.hotkeyCode;
  if (newHotkey) {
    window.setHotkeyActive.childNodes[0].childNodes[0].innerText = newHotkey;
    window.setHotkeyActive.childNodes[0].childNodes[0].dataset.hotkeyCode = newHotkeyCode;
    window.hotkeySetContainer.remove();
    window.setHotkeyActive.style.border = '';
    window.setHotkeyActive.style.borderBottom = '';
    window.setHotkeyActive = undefined;
  }
}

function deleteHotkey(e) {
  const hotkeyCardContainer = this.parentNode.parentNode.parentNode;

  const hotkeyCard = hotkeyCardContainer.childNodes[0];
  const hotkey = hotkeyCard.childNodes[0].childNodes[0].innerText;
  const command = hotkeyCard.childNodes[1].innerText;
  const confirmDelete = confirm(
    `Confirm deletion of selected hotkey: 
    ${hotkey}:   ${command}`
  );
  if (confirmDelete) {
    window.setHotkeyActive = undefined;
    hotkeyCardContainer.remove();
  }
}

function setHotkeyClickHandler(e) {
  console.log('GOO');
  if (!window.hotkeySetContainer) {
    console.log('create new div');
    // create new div
    const hotkeySetContainer = document.createElement('div');
    window.hotkeySetContainer = hotkeySetContainer;
    hotkeySetContainer.style.cssText =
      'display: flex; text-align: center; font-weight: bold; background: white;';
    const hotkeySetText = document.createTextNode('New hotkey:');
    const hotkeyDiv = document.createElement('div');
    hotkeyDiv.style.flex = '1 1';
    const saveHotkeyButton = document.createElement('button');
    saveHotkeyButton.append(document.createTextNode('Save'));
    saveHotkeyButton.classList.add(
      'TW3Button',
      'TW3ButtonBackground',
      'TW3ButtonBorder'
    );
    saveHotkeyButton.style.cssText = 'font-size: 8pt;';
    saveHotkeyButton.onclick = saveUpdatedHotkey;

    const deleteHotkeyButton = document.createElement('button');
    deleteHotkeyButton.append(document.createTextNode('Delete'));
    deleteHotkeyButton.classList.add(
      'TW3Button',
      'TW3ButtonBackground',
      'TW3ButtonBorder'
    );
    deleteHotkeyButton.style.cssText = 'font-size: 8pt;';
    deleteHotkeyButton.onclick = deleteHotkey;

    hotkeySetContainer.append(
      hotkeySetText,
      hotkeyDiv,
      saveHotkeyButton,
      deleteHotkeyButton
    );
  }
  const newParent = this.parentNode.parentNode;

  //  reuse div
  const oldParent = window.hotkeySetContainer.parentNode;
  if (oldParent) {
    oldParent.style.border = '';
    oldParent.style.borderBottom = '1px solid grey';
  }

  newParent.append(window.hotkeySetContainer);
  newParent.style.border = '1px solid black';
  window.setHotkeyActive = newParent;
}

function hotkeyCodeToText(hotkey) {
  const [shiftKey, altKey, ctrlKey] = hotkey
    .slice(-3)
    .split('')
    .map((keyString) => Boolean(+keyString));

  const key = hotkey.slice(0, -3);
  // TODO: add OS specific names
  // Example: Alt == Option on macs
  return (
    (shiftKey & (key !== 'Shift') ? 'Shift+' : '') +
    (altKey & (key !== 'Alt') ? 'Alt+' : '') +
    (ctrlKey & (key !== 'Control') ? 'Ctrl+' : '') +
    key
  );
}
const template = { createUI };
export default template;
