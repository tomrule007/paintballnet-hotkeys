!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],o=!0,r=!1,a=void 0;try{for(var i,d=e[Symbol.iterator]();!(o=(i=d.next()).done)&&(n.push(i.value),!t||n.length!==t);o=!0);}catch(e){r=!0,a=e}finally{try{o||null==d.return||d.return()}finally{if(r)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}n.r(t);function a(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var i=JSON.parse(window.localStorage.getItem("pbn-hotkeys")||JSON.stringify({})),d=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hotkeys=i}var t,n,o;return t=e,(n=[{key:"setHotkeys",value:function(e){this.hotkeys=e,window.localStorage.setItem("pbn-hotkeys",JSON.stringify(e))}}])&&a(t.prototype,n),o&&a(t,o),e}();function c(e,t,n){return(c=u()?Reflect.construct:function(e,t,n){var o=[null];o.push.apply(o,t);var r=new(Function.bind.apply(e,o));return n&&l(r,n.prototype),r}).apply(null,arguments)}function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){return function(e){if(Array.isArray(e))return y(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var f={createUI:function(){var e=document.createElement("div");e.classList.add("TPBTOverlayScrollItem","TPBTOverlayScrollInfoItem"),e.style.cssText="position: fixed; \n                     z-index: 1000;\n                     top: 2px;\n                     right: 2px;\n                     color: red;\n                     text-decoration: underline;\n                     cursor: pointer;\n                     ";var t=document.createElement("a");t.appendChild(document.createTextNode("PBN-Hotkeys")),t.title="red = not connected\nblack = connected\nhotkeys by tomrule007",t.id="pbnHotkeysLink",e.append(t),document.body.appendChild(e);var n=document.createElement("div");n.id="pbnHotkeysMenu",n.classList.add("TW3Panel","TW3ContainerBorder","TW3ContainerBackground"),n.style.cssText="z-index: 8; right: 2px; top: 40px; position: fixed; display: none;";var o=document.createElement("div");o.style.cssText="display: flex; justify-content:\tspace-between;";var r=document.createElement("span");r.append(document.createTextNode("Paintballnet-Hotkeys by tomrule007")),r.classList.add("tw3label");var a=document.createElement("div");a.id="pbnHotkeyMenuDisplay",a.classList.add("TPBTListBox"),a.style.cssText="margin: 5px 2px; font-family: Lucida Console; font-size: 10pt; padding: 2px;";var i=document.createElement("button");i.append(document.createTextNode("X")),i.classList.add("TW3Button","TW3ButtonBackground","TW3ButtonBorder"),i.style.cssText="margin: 2px; font-size: 8pt;",i.id="pbnHotkeysMenuCloseButton";var d=document.createElement("button");d.append(document.createTextNode("Save Changes")),d.classList.add("TW3Button","TW3ButtonBackground","TW3ButtonBorder"),d.style.cssText="margin: 2px; font-size: 8pt;",d.id="pbnHotkeysMenuSaveButton";var c=document.createElement("div");c.style.display="flex",c.style.justifyContent="center",o.append(r,i),c.append(d),n.append(o,a,c),document.body.appendChild(n)},createHotkeyCard:function(e,t,n){var o=document.createElement("div");o.classList.add("pbnHotkeyCard"),o.style.position="relative";var r=document.createElement("div");r.style.cssText="display: inline-block; min-width: 60px; textAlign: right; margin: 0px 2px";var a=document.createElement("a");a.dataset.hotkeyCode=e,a.append(document.createTextNode(t)),r.append(a);var i=document.createElement("input");return i.classList.add("TW3EditBox","TW3EditBorder","TW3EditBackground"),i.value=n,i.style.width="350px",i.type="text",i.setAttribute("placeholder","type commands here"),i.onkeydown=function(e){return e.stopPropagation()},o.append(r,i),[o,a]},createHotkeyEditCard:function(){var e=document.createElement("div");e.style.cssText="display: flex; text-align: center; font-weight: bold; background: white;";var t=document.createTextNode("New hotkey:"),n=document.createElement("div");n.style.flex="1 1";var o=document.createElement("button");o.append(document.createTextNode("Set")),o.classList.add("TW3Button","TW3ButtonBackground","TW3ButtonBorder"),o.style.cssText="font-size: 8pt;";var r=document.createElement("button");return r.append(document.createTextNode("Delete")),r.classList.add("TW3Button","TW3ButtonBackground","TW3ButtonBorder"),r.style.cssText="font-size: 8pt;",r.style.margin="0 2px",e.append(t,n,o,r),[e,o,r]}};function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],o=!0,r=!1,a=void 0;try{for(var i,d=e[Symbol.iterator]();!(o=(i=d.next()).done)&&(n.push(i.value),!t||n.length!==t);o=!0);}catch(e){r=!0,a=e}finally{try{o||null==d.return||d.return()}finally{if(r)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function k(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var v=function(){function e(t){var n,o,r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n=function(){r._setLinkEnabled()},o=new Proxy(window.WebSocket,{construct:function(e,t){var o=c(e,s(t));o.addEventListener("open",n),o.addEventListener("close",(function e(t){o.removeEventListener("open",n),o.removeEventListener("close",e)}));var r=new Proxy(o.send,{apply:function(e,t,n){e.apply(t,n)}});return o.send=r,window.sendPortal=o.send.bind(o),o}}),window.WebSocket=o,this.createUI=f.createUI,this.createUI();var a=p(f.createHotkeyEditCard(),3);this.$hotkeyEditCard=a[0],this.$setHotkeyButton=a[1],this.$deleteHotkeyButton=a[2],this.$setHotkeyButton.addEventListener("click",(function(){return r._onClickSetHotkey(r.$activeEditHotkeyCard)})),this.$deleteHotkeyButton.addEventListener("click",(function(){return r._deleteHotkey(r.$activeEditHotkeyCard)})),this.$activeEditHotkeyCard=null,this.$injectionRoot=document.body,this.$menuLink=document.querySelector("#pbnHotkeysLink"),this.$menu=document.querySelector("#pbnHotkeysMenu"),this.$menuSaveButton=document.querySelector("#pbnHotkeysMenuSaveButton"),this.$menuCloseButton=document.querySelector("#pbnHotkeysMenuCloseButton"),this.$hotkeys=document.querySelector("#pbnHotkeyMenuDisplay"),this.$menuLink.addEventListener("click",(function(){return r._showMenu(!0)})),this.$menuCloseButton.addEventListener("click",(function(){r._showMenu(!1),r._clearAndRemoveEditHotkeyCard()}))}var t,n,o;return t=e,(n=[{key:"_readEditHotkeyCardData",value:function(){var e=this.$hotkeyEditCard.childNodes[1];return{hotkey:e.dataset.hotkeyCode,hotkeyText:e.innerText}}},{key:"_updateEditHotkeyCard",value:function(e){var t=this.$hotkeyEditCard.childNodes[1];t.dataset.hotkeyCode=e,t.innerText=this._hotkeyCodeToText(e)}},{key:"_createHotkeyCard",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.hotkey,o=void 0===n?"":n,r=t.command,a=void 0===r?"":r,i=o?this._hotkeyCodeToText(o):"Hotkey",d=f.createHotkeyCard(o,i,a),c=p(d,2),u=c[0],l=c[1];l.addEventListener("click",(function(){return e._onClickHotkeyHandler(u)})),this.$hotkeys.append(u)}},{key:"_readHotkeyCardData",value:function(e){return{hotkey:e.childNodes[0].childNodes[0].innerText,command:e.childNodes[1].value}}},{key:"_updateHotkeyCardData",value:function(e,t){var n=t.hotkey,o=t.command;n&&("Hotkey"===e.childNodes[0].childNodes[0].innerText&&this._createHotkeyCard(),e.childNodes[0].childNodes[0].dataset.hotkeyCode=n,e.childNodes[0].childNodes[0].innerText=this._hotkeyCodeToText(n)),o&&(e.childNodes[1].value=o)}},{key:"_deleteHotkey",value:function(e){var t=this._readHotkeyCardData(e),n=t.hotkey,o=t.command;"Hotkey"!==n?confirm("DELETE: ".concat(n,": ").concat(o))&&(this.$activeEditHotkeyCard=null,e.remove()):alert("You can not delete the blank hotkey card")}},{key:"_showMenu",value:function(e){this.$menu.style.display=e?"block":"none"}},{key:"_setLinkEnabled",value:function(){pbnHotkeysLink.style.color="black"}},{key:"_hotkeyCodeToText",value:function(e){if(""===e)return"";var t=p(e.slice(-3).split("").map((function(e){return Boolean(+e)})),3),n=t[0],o=t[1],r=t[2],a=e.slice(0,-3);return(n&"Shift"!==a?"Shift+":"")+(o&"Alt"!==a?"Alt+":"")+(r&"Control"!==a?"Ctrl+":"")+a}},{key:"_clearAndRemoveEditHotkeyCard",value:function(){this._updateEditHotkeyCard(""),this.$hotkeyEditCard.remove(),this.$activeEditHotkeyCard.style.border="",this.$activeEditHotkeyCard=null}},{key:"_getHotkeysFromMenu",value:function(){var e=Array.from(this.$hotkeys.childNodes);return Object.fromEntries(e.map((function(e){return[e.childNodes[0].childNodes[0].dataset.hotkeyCode,e.childNodes[1].value]})))}},{key:"_onClickSetHotkey",value:function(e){var t=this._readEditHotkeyCardData(),n=t.hotkey,o=t.hotkeyText;null==this._getHotkeysFromMenu()[n]?(this._updateHotkeyCardData(e,{hotkey:n,hotkeyText:o}),this._clearAndRemoveEditHotkeyCard()):alert("That hotkey is already assigned")}},{key:"_onClickHotkeyHandler",value:function(e){this.$activeEditHotkeyCard&&(this.$activeEditHotkeyCard.style.border=""),e.append(this.$hotkeyEditCard),e.style.border="1px solid black",this.$activeEditHotkeyCard=e}},{key:"bindOnKeydown",value:function(e){document.addEventListener("keydown",e)}},{key:"render",value:function(e,t){switch(e){case"addHotkey":this._createHotkeyCard(t);break;default:throw Error("Invalid viewCommand: ".concat(e," "))}}},{key:"bindEvent",value:function(e,t){var n=this;switch(e){case"onSaveChanges":this.$menuSaveButton.addEventListener("click",(function(){var e=n._getHotkeysFromMenu();t(e)}));break;case"onKeydown":document.addEventListener("keydown",t);break;default:throw Error("Invalid eventName: ".concat(e," "))}}}])&&k(t.prototype,n),o&&k(t,o),e}();if(!window.pbnHotkeysLoaded){window.pbnHotkeysLoaded=!0;new function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"handleKeydown",(function(e){var t=e.key+ +e.shiftKey+ +e.altKey+ +e.ctrlKey,n=!(window.Component592===document.activeElement);r.view.$activeEditHotkeyCard?r.view._updateEditHotkeyCard(t):n&&r.model.hotkeys[t]&&sendPortal('{"id":"05","text":"'.concat(r.model.hotkeys[t],'"}'))})),this.view=t,this.model=n,t.bindEvent("onKeydown",(function(e){return r.handleKeydown(e)})),t.bindEvent("onSaveChanges",(function(e){r.model.setHotkeys(e)})),Object.entries(n.hotkeys).forEach((function(e){var n=o(e,2),r=n[0],a=n[1];t.render("addHotkey",{hotkey:r,command:a})})),t.render("addHotkey")}(new v,new d);console.log("PBN-Hotkeys by tomrule007")}}]);